<!DOCTYPE html><html lang="vi"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>Xây dựng ứng dụng Client-Server với Socket trong Java - TheAnh</title><meta name="description" content="Mô hình Client-Server sử dụng Socket ở chế độ có nối kết (TCP) Có thể phân thành 4 giai đoạn như sau: Có thể phân thành 3 giai đoạn như sau: Thông qua các lớp trong gói java.net, các chương trình Java có thể sử dụng&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://www.bing.com/images/search?view=detailV2&ccid=UUHyUxUQ&id=36792973FF68E51E6FB0D80EE6C69F54068B440E&thid=OIP.UUHyUxUQBexX5Xoqx93CHQHaEI&mediaurl=https%3a%2f%2fcontent.techgig.com%2fphoto%2f77766881%2f4-tips-to-effectively-understand-java-programming-language.jpg%3f142209&cdnurl=https%3a%2f%2fth.bing.com%2fth%2fid%2fR.5141f253151005ec57e57a2ac7ddc21d%3frik%3dDkSLBlSfxuYO2A%26pid%3dImgRaw%26r%3d0&exph=480&expw=860&q=java&simid=608053235605901963&FORM=IRPRST&ck=25D30B2574363D157D66850E5337A75F&selectedIndex=0&itb=0/"><link rel="alternate" type="application/atom+xml" href="https://theanh412.github.io/myblog/feed.xml"><link rel="alternate" type="application/json" href="https://theanh412.github.io/myblog/feed.json"><meta property="og:title" content="Xây dựng ứng dụng Client-Server với Socket trong Java"><meta property="og:image" content="https://theanh412.github.io/myblog/media/posts/9/images.jpg"><meta property="og:image:width" content="272"><meta property="og:image:height" content="185"><meta property="og:site_name" content="TheAnh"><meta property="og:description" content="Mô hình Client-Server sử dụng Socket ở chế độ có nối kết (TCP) Có thể phân thành 4 giai đoạn như sau: Có thể phân thành 3 giai đoạn như sau: Thông qua các lớp trong gói java.net, các chương trình Java có thể sử dụng&hellip;"><meta property="og:url" content="https://theanh412.github.io/myblog/xay-dung-ung-dung-client-server-voi-socket-trong-java.html"><meta property="og:type" content="article"><link rel="stylesheet" href="https://theanh412.github.io/myblog/assets/css/fontawesome-all.min.css?v=85514f933f9e0b82460af63f1a403fa5"><link rel="stylesheet" href="https://theanh412.github.io/myblog/assets/css/style.css?v=ce71eff53585df2c0e9bb375407ae7d8"><noscript><link rel="stylesheet" href="https://theanh412.github.io/myblog/assets/css/noscript.css?v=efa867a99f5064d6729e4dc2008ad50b"></noscript><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://theanh412.github.io/myblog/xay-dung-ung-dung-client-server-voi-socket-trong-java.html"},"headline":"Xây dựng ứng dụng Client-Server với Socket trong Java","datePublished":"2024-12-31T10:00+07:00","dateModified":"2024-12-31T20:17+07:00","image":{"@type":"ImageObject","url":"https://theanh412.github.io/myblog/media/posts/9/images.jpg","height":185,"width":272},"description":"Mô hình Client-Server sử dụng Socket ở chế độ có nối kết (TCP) Có thể phân thành 4 giai đoạn như sau: Có thể phân thành 3 giai đoạn như sau: Thông qua các lớp trong gói java.net, các chương trình Java có thể sử dụng&hellip;","author":{"@type":"Person","name":"TheAnh","url":"https://theanh412.github.io/myblog/authors/theanh/"},"publisher":{"@type":"Organization","name":"TheAnh","logo":{"@type":"ImageObject","url":"https://theanh412.github.io/myblog/media/website/xoa.png","height":172,"width":541}}}</script><style>#wrapper > .bg {
               background-image: url(https://theanh412.github.io/myblog/assets/images/overlay.png), linear-gradient(0deg, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1)), url(https://theanh412.github.io/myblog/media/website/nen2.jpg);
           }</style><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body class="is-preload post-template"><div id="wrapper"><header id="header"><a class="logo logo-image" href="https://theanh412.github.io/myblog/"><img src="https://theanh412.github.io/myblog/media/website/xoa.png" alt="TheAnh" width="541" height="172"></a></header><nav id="nav"><ul class="links"><li><a href="https://theanh412.github.io/myblog/" target="_self">HOME</a></li><li><a href="https://theanh412.github.io/myblog/tags/blogs/" target="_self">BLOGS</a></li><li><a href="https://theanh412.github.io/myblog/nguyen-le-the-anh.html" target="_self">PROFILE</a></li><li><a href="https://theanh412.github.io/myblog/tags/certificate/" target="_self">CERTIFICATE</a></li></ul></nav><main id="main"><article class="post"><header class="major"><time datetime="2024-12-31T10:00" class="date">tháng 12 31, 2024</time><h1>Xây dựng ứng dụng Client-Server với Socket trong Java</h1><p class="post__inner"></p></header><figure class="image main"><img src="https://theanh412.github.io/myblog/media/posts/9/images.jpg" srcset="https://theanh412.github.io/myblog/media/posts/9/responsive/images-xs.jpg 300w, https://theanh412.github.io/myblog/media/posts/9/responsive/images-sm.jpg 480w, https://theanh412.github.io/myblog/media/posts/9/responsive/images-md.jpg 768w, https://theanh412.github.io/myblog/media/posts/9/responsive/images-lg.jpg 1024w, https://theanh412.github.io/myblog/media/posts/9/responsive/images-xl.jpg 1360w" sizes="(max-width: 1360px) 100vw, 1360px" loading="lazy" height="185" width="272" alt=""></figure><div class="post__inner post__entry"><h2 id="mo-hinh-client-server-su-dung-socket-o-che-do-co-noi-ket-tcp" class="ftwp-heading"><span id="Mo_hinh_Client-Server_su_dung_Socket_o_che_do_co_noi_ket_TCP">Mô hình Client-Server sử dụng Socket ở chế độ có nối kết (TCP)</span></h2><figure class="alignnone wp-image-30047 size-full lazyloaded"><img src="https://topdev.vn/blog/wp-content/uploads/2020/10/Socket-tcp.png" sizes="(max-width: 795px) 100vw, 795px" srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/Socket-tcp.png 795w, https://topdev.vn/blog/wp-content/uploads/2020/10/Socket-tcp-248x300.png 248w, https://topdev.vn/blog/wp-content/uploads/2020/10/Socket-tcp-768x929.png 768w, https://topdev.vn/blog/wp-content/uploads/2020/10/Socket-tcp-696x842.png 696w, https://topdev.vn/blog/wp-content/uploads/2020/10/Socket-tcp-347x420.png 347w" alt="Xây dựng ứng dụng Client-Server với Socket trong Java" width="795" height="962" loading="lazy" data-srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/Socket-tcp.png 795w, https://topdev.vn/blog/wp-content/uploads/2020/10/Socket-tcp-248x300.png 248w, https://topdev.vn/blog/wp-content/uploads/2020/10/Socket-tcp-768x929.png 768w, https://topdev.vn/blog/wp-content/uploads/2020/10/Socket-tcp-696x842.png 696w, https://topdev.vn/blog/wp-content/uploads/2020/10/Socket-tcp-347x420.png 347w" data-src="https://topdev.vn/blog/wp-content/uploads/2020/10/Socket-tcp.png" data-sizes="(max-width: 795px) 100vw, 795px" data-is-external-image="true"></figure><p>Có thể phân thành 4 giai đoạn như sau:</p><ul><li><strong>Giai đoạn 1</strong>: Server tạo Socket, gán số hiệu cổng và lắng nghe yêu cầu nối kết. Server sẵn sàng phục vụ Client.socket(): Server yêu cầu tạo một socket để có thể sử dụng các dịch vụ của tầng vận chuyển.<ul><li>bind(): Server yêu cầu gán số hiệu cổng (port) cho socket.</li><li>listen(): Server lắng nghe các yêu cầu nối kết từ các client trên cổng đã được gán.</li></ul></li><li><strong>Giai đoạn 2</strong>: Client tạo Socket, yêu cầu thiết lập một nối kết với Server.<ul><li>socket(): Client yêu cầu tạo một socket để có thể sử dụng các dịch vụ của tầng vận chuyển, thông thường hệ thống tự động gán một số hiệu cổng còn rảnh cho socket của Client.</li><li>connect(): Client gởi yêu cầu nối kết đến server có địa chỉ IP và Port xác định.</li><li>accept(): Server chấp nhận nối kết của client, khi đó một kênh giao tiếp ảo được hình thành, Client và server có thể trao đổi thông tin với nhau thông qua kênh ảo này.</li></ul></li><li><strong>Giai đoạn 3</strong>: Trao đổi thông tin giữa Client và Server.<ul><li>Sau khi chấp nhận yêu cầu nối kết, thông thường server thực hiện lệnh read() và nghẽn cho đến khi có thông điệp yêu cầu (Request Message) từ client gởi đến.</li><li>Server phân tích và thực thi yêu cầu. Kết quả sẽ được gởi về client bằng lệnh write().</li><li>Sau khi gởi yêu cầu bằng lệnh write(), client chờ nhận thông điệp kết quả (ReplyMessage) từ server bằng lệnh read().</li></ul></li><li><strong>Giai đoạn 4</strong>: Kết thúc phiên làm việc.<ul><li>Các câu lệnh read(), write() có thể được thưc hiện nhiều lần (ký hiệu bằng hình ellipse).</li><li>Kênh ảo sẽ bị xóa khi Server hoặc Client đóng socket bằng lệnh close().</li></ul></li></ul><div><a href="https://topdev.vn/blog/lap-trinh-web-voi-java/" target="_blank" rel="dofollow noopener" class="ua061c60d409b2a2937f34ae711b37b3f"><div>  <span class="postTitle">10 Java Web Framework tốt nhất</span></div></a></div><div><a href="https://topdev.vn/blog/hoc-lap-trinh-java/" target="_blank" rel="dofollow noopener" class="ua1f3f80a3080cf222efd41cd032a66c9"><div>  <span class="postTitle">10 lý do cho thấy tại sao bạn nên theo học ngôn ngữ lập trình Java</span></div></a></div><h2 id="mo-hinh-client-server-su-dung-socket-o-che-do-khong-noi-ket-udp" class="ftwp-heading"><span id="Mo_hinh_Client-Server_su_dung_Socket_o_che_do_khong_noi_ketUDP">Mô hình Client-Server sử dụng Socket ở chế độ không nối kết (UDP)</span></h2><figure class="alignnone size-full wp-image-30048 lazyloaded"><img src="https://topdev.vn/blog/wp-content/uploads/2020/10/Socket-udp.png" sizes="(max-width: 795px) 100vw, 795px" srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/Socket-udp.png 795w, https://topdev.vn/blog/wp-content/uploads/2020/10/Socket-udp-296x300.png 296w, https://topdev.vn/blog/wp-content/uploads/2020/10/Socket-udp-768x779.png 768w, https://topdev.vn/blog/wp-content/uploads/2020/10/Socket-udp-696x706.png 696w, https://topdev.vn/blog/wp-content/uploads/2020/10/Socket-udp-414x420.png 414w" alt="Xây dựng ứng dụng Client-Server với Socket trong Java" width="795" height="806" loading="lazy" data-srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/Socket-udp.png 795w, https://topdev.vn/blog/wp-content/uploads/2020/10/Socket-udp-296x300.png 296w, https://topdev.vn/blog/wp-content/uploads/2020/10/Socket-udp-768x779.png 768w, https://topdev.vn/blog/wp-content/uploads/2020/10/Socket-udp-696x706.png 696w, https://topdev.vn/blog/wp-content/uploads/2020/10/Socket-udp-414x420.png 414w" data-src="https://topdev.vn/blog/wp-content/uploads/2020/10/Socket-udp.png" data-sizes="(max-width: 795px) 100vw, 795px" data-is-external-image="true"></figure><p>Có thể phân thành 3 giai đoạn như sau:</p><ul><li>Giai đoạn 1:  Server tạo Socket – gán số hiệu cổng.<ul><li>socket(): Server yêu cầu tạo một socket để có thể sử dụng các dịch vụ của tầng vận chuyển.</li><li>bind(): Server yêu cầu gán số hiệu cổng cho socket.</li></ul></li><li>Giai đoạn 2:  Client tạo Socket.<ul><li>socket(): Client yêu cầu tạo một socket để có thể sử dụng các dịch vụ của tầng vận chuyển, thông thường hệ thống tự động gán một số hiệu cổng còn rảnh cho socket của Client.</li></ul></li><li>Giai đoạn 3:  Trao đổi thông tin giữa Client và Server.<ul><li>Sau khi tạo Socket xong, Client và Server có thể trao đổi thông tin qua lại với nhau thông qua hai hàm send() và receive().</li><li>Đơn vị dữ liệu trao đổi giữa Client và Server là các Datagram Package (Gói tin thư tín).</li><li>Protocol của ứng dụng phải định nghĩa khuôn dạng và ý nghĩa của các Datagram Package. Mỗi Datagram Package có chứa thông tin về địa chỉ người gởi và người nhận (IP, Port).</li></ul></li></ul><h2 id="xay-dung-ung-dung-client-server-voi-socket-trong-java" class="ftwp-heading"><span id="Xay_dung_ung_dung_Client-Server_voi_Socket_trong_Java">Xây dựng ứng dụng Client-Server với Socket trong Java</span></h2><p>Thông qua các lớp trong gói <strong>java.net</strong>, các chương trình Java có thể sử dụng TCP hoặc UDP để giao tiếp qua Internet.</p><ul><li>Lớp <strong>IntetAddress</strong>:  Lớp này quản lý địa chỉ Internet bao gồm địa chỉ IP và tên máy tính.</li><li>Lớp <strong>Socket</strong>: Hỗ trợ các phương thức liên quan đến Socket cho chương trình Client ở chế độ có nối kết.</li><li>Lớp <strong>ServerSocket</strong>: Hỗ trợ các phương thức liên quan đến Socket cho chương trình Server ở chế độ có nối kết.</li><li>Lớp <strong>DatagramSocket</strong>: Hỗ trợ các phương thức liên quan đến Socket ở chế độ không nối kết cho cả Client và Server.</li><li>Lớp <strong>DatagramPacket</strong>: Lớp cài đặt gói tin dạng thư tín người dùng (Datagram Packet) trong giao tiếp giữa Client và Server ở chế độ không nối kết.</li></ul><p><strong><a href="https://topdev.vn/viec-lam-it/java-k">Tuyển Java lương cao</a> up to 2000 USD</strong></p><h3 id="xay-dung-chuong-trinh-client-server-o-che-do-co-noi-ket-tcp" class="ftwp-heading"><span id="Xay_dung_chuong_trinh_Client_8211_Server_o_che_do_co_noi_ket_TCP">Xây dựng chương trình Client – Server ở chế độ có nối kết (TCP)</span></h3><p>Trong phần tiếp theo tôi sẽ hướng dẫn các bạn xây dựng chương trình Client – Server đơn giản. Client sẽ gởi lần lượt các số từ 0 đến 9 tới Server. Server lần lượt sẽ gởi các số nhận được về Client.</p><p>Các bước tổng quát xây dựng một chương trình Client – Server ở chế độ có nối kết như sau:</p><ul><li>Mở một socket nối kết đến server đã biết địa chỉ IP (hay tên miền) và số hiệu cổng.</li><li>Lấy InputStream và OutputStream gán với Socket.</li><li>Tham khảo Protocol của dịch vụ để định dạng đúng dữ liệu trao đổi với Server.</li><li>Trao đổi dữ liệu với Server nhờ vào các InputStream và OutputStream.</li><li>Đóng Socket trước khi kết thúc chương trình.</li></ul><h4 id="xay-dung-chuong-trinh-client-o-che-do-co-noi-ket" class="ftwp-heading"><span id="Xay_dung_chuong_trinh_Client_o_che_do_co_noi_ket">Xây dựng chương trình Client ở chế độ có nối kết</span></h4><p>Một số <span class="fontstyle0">phương thức cần thiết để xây dựng các chương trình client sử dụng socket ở chế độ có nối kết:</span></p><ul><li><ul><li><span class="fontstyle0">public <strong>Socket(String HostName, int PortNumber)</strong> : Phương thức này dùng để nối kết đến một server có tên là HostName, cổng là PortNumber. Nếu nối kết thành công, một kênh ảo sẽ được hình thành giữa Client và Server.</span><ul><li><span class="fontstyle0">HostName: Địa chỉ IP hoặc tên logic theo dạng tên miền.</span></li><li><span class="fontstyle0">PortNumber: có giả trị từ 0 ..65535</span></li></ul></li><li><span class="fontstyle0">public InputStream <strong>getInputStream()</strong></span> : <span class="fontstyle0">Phương thức này trả về InputStream nối với Socket. Chương trình Client dùng InputStream này để nhận dữ liệu từ Server gởi về.</span></li><li><span class="fontstyle0">public OutputStream <strong>getOutputStream()</strong></span> :  <span class="fontstyle0">Phương thức này trả về OutputStream nối với Socket. Chương trình Client dùng OutputStream này để gởi dữ liệu cho Server.</span></li><li><span class="fontstyle0">public close()</span> :  <span class="fontstyle0">Phương thức này sẽ đóng Socket lại, giải phóng kênh ảo, xóa nối kết giữa Client và<br>Server.</span></li></ul></li></ul><p>Code của chương trình Client như sau:</p><div class="code-content"><div class="code-expandContent"><pre class="brush: java; title: ; notranslate prettyprinted"><span class="kwd">package</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">gpcoder</span><span class="pun">.</span><span class="pln">tcp</span><span class="pun">;</span>

<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">IOException</span><span class="pun">;</span>
<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">InputStream</span><span class="pun">;</span>
<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">OutputStream</span><span class="pun">;</span>
<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.</span><span class="typ">Socket</span><span class="pun">;</span>

<span class="kwd">public</span> <span class="kwd">class</span> <span class="typ">EchoChatClient</span> <span class="pun">{</span>
	<span class="kwd">public</span> <span class="kwd">final</span> <span class="kwd">static</span> <span class="typ">String</span><span class="pln"> SERVER_IP </span><span class="pun">=</span> <span class="str">"127.0.0.1"</span><span class="pun">;</span>
	<span class="kwd">public</span> <span class="kwd">final</span> <span class="kwd">static</span> <span class="kwd">int</span><span class="pln"> SERVER_PORT </span><span class="pun">=</span> <span class="lit">7</span><span class="pun">;</span>

	<span class="kwd">public</span> <span class="kwd">static</span> <span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pun">[]</span><span class="pln"> args</span><span class="pun">)</span> <span class="kwd">throws</span> <span class="typ">IOException</span><span class="pun">,</span> <span class="typ">InterruptedException</span> <span class="pun">{</span>
		<span class="typ">Socket</span><span class="pln"> socket </span><span class="pun">=</span> <span class="kwd">null</span><span class="pun">;</span>
		<span class="kwd">try</span> <span class="pun">{</span><span class="pln">
			socket </span><span class="pun">=</span> <span class="kwd">new</span> <span class="typ">Socket</span><span class="pun">(</span><span class="pln">SERVER_IP</span><span class="pun">,</span><span class="pln"> SERVER_PORT</span><span class="pun">);</span> <span class="com">// Connect to server</span>
			<span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"Connected: "</span> <span class="pun">+</span><span class="pln"> socket</span><span class="pun">);</span>

			<span class="typ">InputStream</span> <span class="kwd">is</span> <span class="pun">=</span><span class="pln"> socket</span><span class="pun">.</span><span class="pln">getInputStream</span><span class="pun">();</span>
			<span class="typ">OutputStream</span><span class="pln"> os </span><span class="pun">=</span><span class="pln"> socket</span><span class="pun">.</span><span class="pln">getOutputStream</span><span class="pun">();</span>
			<span class="kwd">for</span> <span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span> <span class="str">'0'</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;=</span> <span class="str">'9'</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span> <span class="pun">{</span><span class="pln">
				os</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="pln">i</span><span class="pun">);</span> <span class="com">// Send each number to the server</span>
				<span class="kwd">int</span><span class="pln"> ch </span><span class="pun">=</span> <span class="kwd">is</span><span class="pun">.</span><span class="pln">read</span><span class="pun">();</span> <span class="com">// Waiting for results from server</span>
				<span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="kwd">print</span><span class="pun">((</span><span class="kwd">char</span><span class="pun">)</span><span class="pln"> ch </span><span class="pun">+</span> <span class="str">" "</span><span class="pun">);</span> <span class="com">// Display the results received from the server</span>
				<span class="typ">Thread</span><span class="pun">.</span><span class="pln">sleep</span><span class="pun">(</span><span class="lit">200</span><span class="pun">);</span>
			<span class="pun">}</span>
		<span class="pun">}</span> <span class="kwd">catch</span> <span class="pun">(</span><span class="typ">IOException</span><span class="pln"> ie</span><span class="pun">)</span> <span class="pun">{</span>
			<span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"Can't connect to server"</span><span class="pun">);</span>
		<span class="pun">}</span> <span class="kwd">finally</span> <span class="pun">{</span>
			<span class="kwd">if</span> <span class="pun">(</span><span class="pln">socket </span><span class="pun">!=</span> <span class="kwd">null</span><span class="pun">)</span> <span class="pun">{</span><span class="pln">
				socket</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span>
			<span class="pun">}</span>
		<span class="pun">}</span>
	<span class="pun">}</span>
<span class="pun">}</span>
<code class="java plain prettyprinted"></code></pre></div><div class="bbCodeBlock-expandLink"><a class="expand">Xem tiếp...</a></div></div><p><code class="prettyprinted"></code></p><h4 id="xay-dung-chuong-trinh-server-o-che-do-co-noi-ket" class="ftwp-heading"><span id="Xay_dung_chuong_trinh_Server_o_che_do_co_noi_ket">Xây dựng chương trình Server ở chế độ có nối kết</span></h4><p><span class="fontstyle0">Một số phương thức cần thiết để xây dụng các chương trình Server sử dụng socket ở chế độ có nối kết.:</span></p><ul><li><span class="fontstyle0">public <strong>ServerSocket(int portNumber)</strong></span><strong> </strong>: p<span class="fontstyle0">hương thức này tạo một Socket với số hiệu cổng là portNumber mà sau đó Server sẽ lắng nghe trên cổng này.</span></li><li><span class="fontstyle0">public Socket <strong>accept()</strong></span><strong> </strong>: <span class="fontstyle0">Phương thức này lắng nghe yêu cầu nối kết của các Client. Đây là một phương thức hoạt động ở chế độ nghẽn. Nó sẽ bị nghẽn cho đến khi có một yêu cầu nối kết của client gởi đến. Khi có yêu cầu nối kết của Client gởi đến, nó sẽ chấp nhận yêu cầu nối kết, trả về<br>một Socket là một đầu của kênh giao tiếp ảo giữa Server và Client yêu cầu nối kết.</span></li><li><span class="fontstyle0">public InputStream <strong>getInputStream()</strong></span> : <span class="fontstyle0">Phương thức này trả về InputStream nối với Socket. Chương trình Server dùng InputStream này để nhận dữ liệu từ Client gởi đến.</span></li><li><span class="fontstyle0">public OutputStream <strong>getOutputStream()</strong></span> :  <span class="fontstyle0">Phương thức này trả về OutputStream nối với Socket. Chương trình Server dùng OutputStream này để trả dữ liệu cho Client.</span></li><li><span class="fontstyle0">public close()</span> :  <span class="fontstyle0">Phương thức này sẽ đóng Socket lại, giải phóng kênh ảo, xóa nối kết giữa Client và<br>Server.</span></li></ul><p><span class="fontstyle0">Một Server có thể được cài đặt để phục vụ các Client theo hai cách: phục vụ tuần tự hoặc phục vụ song song.</span></p><ul><li><span class="fontstyle0">Trong chế độ phục vụ tuần tự, tại một thời điểm Server chỉ chấp nhận một yêu cầu nối kết. Các yêu cầu nối kết của các Client khác đều không được đáp ứng (đưa vào hàng đợi).</span></li><li><span class="fontstyle0">Ngược lại trong chế độ phục vụ song song, tại một thời điểm Server chấp nhận nhiều yêu cầu nối kết và phục vụ nhiều Client cùng lúc.</span></li></ul><h4 id="xay-dung-chuong-trinh-server-phuc-vu-tuan-tu" class="ftwp-heading"><span id="Xay_dung_chuong_trinh_Server_phuc_vu_tuan_tu">Xây dựng chương trình Server phục vụ tuần tự</span></h4><figure class="alignnone size-full wp-image-30049 lazyloaded"><img src="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-echo-single-server.png" sizes="(max-width: 585px) 100vw, 585px" srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-echo-single-server.png 585w, https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-echo-single-server-300x261.png 300w, https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-echo-single-server-484x420.png 484w" alt="Xây dựng ứng dụng Client-Server với Socket trong Java" width="585" height="508" loading="lazy" data-srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-echo-single-server.png 585w, https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-echo-single-server-300x261.png 300w, https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-echo-single-server-484x420.png 484w" data-src="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-echo-single-server.png" data-sizes="(max-width: 585px) 100vw, 585px" data-is-external-image="true"></figure><p>Các bước thực hiện như sau:</p><ul><li>Tạo socket và gán số hiệu cổng cho server.</li><li>Lắng nghe yêu cầu nối kết.</li><li>Với một yêu cầu nối kết được chấp nhận thực hiện các bước sau:<ul><li>Lấy InputStream và OutputStream gắn với Socket của kênh ảo vừa được hình thành.</li><li>Lặp lại công việc sau:<ul><li>Chờ nhận các yêu cầu (công việc).</li><li>Phân tích và thực hiện yêu cầu.</li><li>Tạo thông điệp trả lời.</li><li>Gởi thông điệp trả lời về Client.</li><li>Nếu không còn yêu cầu hoặc Client kết thúc, đóng Socket và quay lại bước 2.</li></ul></li></ul></li></ul><p>Code của chương trình Server như sau:</p><div class="code-content"><div class="code-expandContent"><pre class="brush: java; title: ; notranslate prettyprinted"><span class="kwd">package</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">gpcoder</span><span class="pun">.</span><span class="pln">tcp</span><span class="pun">;</span>

<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">IOException</span><span class="pun">;</span>
<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">InputStream</span><span class="pun">;</span>
<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">OutputStream</span><span class="pun">;</span>
<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.</span><span class="typ">ServerSocket</span><span class="pun">;</span>
<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.</span><span class="typ">Socket</span><span class="pun">;</span>

<span class="kwd">public</span> <span class="kwd">class</span> <span class="typ">EchoChatSingleServer</span> <span class="pun">{</span>

	<span class="kwd">public</span> <span class="kwd">final</span> <span class="kwd">static</span> <span class="kwd">int</span><span class="pln"> SERVER_PORT </span><span class="pun">=</span> <span class="lit">7</span><span class="pun">;</span>

	<span class="kwd">public</span> <span class="kwd">static</span> <span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pun">[]</span><span class="pln"> args</span><span class="pun">)</span> <span class="kwd">throws</span> <span class="typ">IOException</span> <span class="pun">{</span>
		<span class="typ">ServerSocket</span><span class="pln"> serverSocket </span><span class="pun">=</span> <span class="kwd">null</span><span class="pun">;</span>
		<span class="kwd">try</span> <span class="pun">{</span>
			<span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"Binding to port "</span> <span class="pun">+</span><span class="pln"> SERVER_PORT </span><span class="pun">+</span> <span class="str">", please wait  ..."</span><span class="pun">);</span><span class="pln">
			serverSocket </span><span class="pun">=</span> <span class="kwd">new</span> <span class="typ">ServerSocket</span><span class="pun">(</span><span class="pln">SERVER_PORT</span><span class="pun">);</span>
			<span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"Server started: "</span> <span class="pun">+</span><span class="pln"> serverSocket</span><span class="pun">);</span>
			<span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"Waiting for a client ..."</span><span class="pun">);</span>
			<span class="kwd">while</span> <span class="pun">(</span><span class="kwd">true</span><span class="pun">)</span> <span class="pun">{</span>
				<span class="kwd">try</span> <span class="pun">{</span>
					<span class="typ">Socket</span><span class="pln"> socket </span><span class="pun">=</span><span class="pln"> serverSocket</span><span class="pun">.</span><span class="pln">accept</span><span class="pun">();</span>
					<span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"Client accepted: "</span> <span class="pun">+</span><span class="pln"> socket</span><span class="pun">);</span>

					<span class="typ">OutputStream</span><span class="pln"> os </span><span class="pun">=</span><span class="pln"> socket</span><span class="pun">.</span><span class="pln">getOutputStream</span><span class="pun">();</span>
					<span class="typ">InputStream</span> <span class="kwd">is</span> <span class="pun">=</span><span class="pln"> socket</span><span class="pun">.</span><span class="pln">getInputStream</span><span class="pun">();</span>
					<span class="kwd">int</span><span class="pln"> ch </span><span class="pun">=</span> <span class="lit">0</span><span class="pun">;</span>
					<span class="kwd">while</span> <span class="pun">(</span><span class="kwd">true</span><span class="pun">)</span> <span class="pun">{</span><span class="pln">
						ch </span><span class="pun">=</span> <span class="kwd">is</span><span class="pun">.</span><span class="pln">read</span><span class="pun">();</span> <span class="com">// Receive data from client</span>
						<span class="kwd">if</span> <span class="pun">(</span><span class="pln">ch </span><span class="pun">==</span> <span class="pun">-</span><span class="lit">1</span><span class="pun">)</span> <span class="pun">{</span>
							<span class="kwd">break</span><span class="pun">;</span>
						<span class="pun">}</span><span class="pln">
						os</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="pln">ch</span><span class="pun">);</span> <span class="com">// Send the results to client</span>
					<span class="pun">}</span><span class="pln">
					socket</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span>
				<span class="pun">}</span> <span class="kwd">catch</span> <span class="pun">(</span><span class="typ">IOException</span><span class="pln"> e</span><span class="pun">)</span> <span class="pun">{</span>
					<span class="typ">System</span><span class="pun">.</span><span class="pln">err</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">" Connection Error: "</span> <span class="pun">+</span><span class="pln"> e</span><span class="pun">);</span>
				<span class="pun">}</span>
			<span class="pun">}</span>
		<span class="pun">}</span> <span class="kwd">catch</span> <span class="pun">(</span><span class="typ">IOException</span><span class="pln"> e1</span><span class="pun">)</span> <span class="pun">{</span><span class="pln">
			e1</span><span class="pun">.</span><span class="pln">printStackTrace</span><span class="pun">();</span>
		<span class="pun">}</span> <span class="kwd">finally</span> <span class="pun">{</span>
			<span class="kwd">if</span> <span class="pun">(</span><span class="pln">serverSocket </span><span class="pun">!=</span> <span class="kwd">null</span><span class="pun">)</span> <span class="pun">{</span><span class="pln">
				serverSocket</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span>
			<span class="pun">}</span>
		<span class="pun">}</span>
	<span class="pun">}</span>

<span class="pun">}</span>
</pre></div><div class="bbCodeBlock-expandLink"><a class="expand">Xem tiếp...</a></div></div><p>Chạy chương trình Server, ta có kết quả sau:</p><figure class="alignnone size-full wp-image-30050 lazyloaded"><img src="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-server-1.png" sizes="(max-width: 455px) 100vw, 455px" srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-server-1.png 455w, https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-server-1-300x58.png 300w" alt="Xây dựng ứng dụng Client-Server với Socket trong Java" width="455" height="88" loading="lazy" data-srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-server-1.png 455w, https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-server-1-300x58.png 300w" data-src="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-server-1.png" data-sizes="(max-width: 455px) 100vw, 455px" data-is-external-image="true"></figure><p>Tiếp tục chạy chương trình Client, ta có kết quả sau:</p><figure class="alignnone size-full wp-image-30051 lazyloaded"><img src="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-client-1-1.png" sizes="(max-width: 419px) 100vw, 419px" srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-client-1-1.png 419w, https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-client-1-1-300x42.png 300w" alt="Xây dựng ứng dụng Client-Server với Socket trong Java" width="419" height="59" loading="lazy" data-srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-client-1-1.png 419w, https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-client-1-1-300x42.png 300w" data-src="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-client-1-1.png" data-sizes="(max-width: 419px) 100vw, 419px" data-is-external-image="true"></figure><p>Xem lại cửa sổ console của Server, ta thấy kết quả như sau:</p><figure class="alignnone size-full wp-image-30052 lazyloaded"><img src="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-server-2.png" sizes="(max-width: 455px) 100vw, 455px" srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-server-2.png 455w, https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-server-2-300x62.png 300w" alt="Xây dựng ứng dụng Client-Server với Socket trong Java" width="455" height="94" loading="lazy" data-srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-server-2.png 455w, https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-server-2-300x62.png 300w" data-src="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-server-2.png" data-sizes="(max-width: 455px) 100vw, 455px" data-is-external-image="true"></figure><h4 id="xay-dung-chuong-trinh-server-phuc-vu-song-song" class="ftwp-heading"><span id="Xay_dung_chuong_trinh_Serverphuc_vu_song_song">Xây dựng chương trình Server phục vụ song song</span></h4><figure class="alignnone size-full wp-image-30054 lazyloaded"><img src="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-multi-server-client-1.png" sizes="(max-width: 869px) 100vw, 869px" srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-multi-server-client-1.png 869w, https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-multi-server-client-1-300x183.png 300w, https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-multi-server-client-1-768x469.png 768w, https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-multi-server-client-1-696x425.png 696w, https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-multi-server-client-1-687x420.png 687w" alt="Xây dựng ứng dụng Client-Server với Socket trong Java" width="869" height="531" loading="lazy" data-srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-multi-server-client-1.png 869w, https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-multi-server-client-1-300x183.png 300w, https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-multi-server-client-1-768x469.png 768w, https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-multi-server-client-1-696x425.png 696w, https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-multi-server-client-1-687x420.png 687w" data-src="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-multi-server-client-1.png" data-sizes="(max-width: 869px) 100vw, 869px" data-is-external-image="true"></figure><p><span class="fontstyle0">Server phục vụ song song có thể chia thành 2 phần thực hiện song song nhau:</span></p><ul><li><span class="fontstyle0">Phần 1 (Dispatcher Thread) : Xử lý các yêu cầu nối kết.  Lặp lại các công việc sau:</span><ul><li><span class="fontstyle0">Lắng nghe yêu cầu nối kết của Client. </span></li><li>Chấp nhận một yêu cầu nối kết: Tạo kênh giao tiếp ảo mới với Client, tạo Phần 2 để xử lý các thông điệp yêu cầu của Client.</li></ul></li><li><span class="fontstyle0">Phần 2 (Worker Thread) : Xử lý các thông điệp yêu cầu từ khách hàng.</span> Lặp lại các công việc sau:<ul><li> Chờ nhận thông điệp yêu cầu của khách hàng.</li><li>Phân tích và xử lý yêu cầu.</li><li>Gởi thông điệp trả lời cho khách hàng.</li></ul></li></ul><p>Phần 2 sẽ kết thúc khi kênh ảo bị xóa đi.</p><p>Với mỗi Client, trên Server sẽ có một Phần 2 để xử lý yêu cầu của khách hàng. Như vậy tại một thời điểm bất kỳ luôn tồn tại 1 Phần 1 và 0 hoặc nhiều Phần 2.</p><p>Code của chương trình Server như sau:</p><div><div id="highlighter_618332" class="syntaxhighlighter code-block java"><p><strong>EchoChatMultiServer.java</strong></p><div><div class="code-content"><div class="code-expandContent"><pre class="brush: java; title: ; notranslate prettyprinted"><span class="kwd">package</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">gpcoder</span><span class="pun">.</span><span class="pln">tcp</span><span class="pun">;</span>

<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">IOException</span><span class="pun">;</span>
<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.</span><span class="typ">ServerSocket</span><span class="pun">;</span>
<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.</span><span class="typ">Socket</span><span class="pun">;</span>
<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="pln">concurrent</span><span class="pun">.</span><span class="typ">ExecutorService</span><span class="pun">;</span>
<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="pln">concurrent</span><span class="pun">.</span><span class="typ">Executors</span><span class="pun">;</span>

<span class="kwd">public</span> <span class="kwd">class</span> <span class="typ">EchoChatMultiServer</span> <span class="pun">{</span>

	<span class="kwd">public</span> <span class="kwd">static</span> <span class="kwd">final</span> <span class="kwd">int</span><span class="pln"> NUM_OF_THREAD </span><span class="pun">=</span> <span class="lit">4</span><span class="pun">;</span>
	<span class="kwd">public</span> <span class="kwd">final</span> <span class="kwd">static</span> <span class="kwd">int</span><span class="pln"> SERVER_PORT </span><span class="pun">=</span> <span class="lit">7</span><span class="pun">;</span>

	<span class="kwd">public</span> <span class="kwd">static</span> <span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pun">[]</span><span class="pln"> args</span><span class="pun">)</span> <span class="kwd">throws</span> <span class="typ">IOException</span> <span class="pun">{</span>
		<span class="typ">ExecutorService</span><span class="pln"> executor </span><span class="pun">=</span> <span class="typ">Executors</span><span class="pun">.</span><span class="pln">newFixedThreadPool</span><span class="pun">(</span><span class="pln">NUM_OF_THREAD</span><span class="pun">);</span>
		<span class="typ">ServerSocket</span><span class="pln"> serverSocket </span><span class="pun">=</span> <span class="kwd">null</span><span class="pun">;</span>
		<span class="kwd">try</span> <span class="pun">{</span>
			<span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"Binding to port "</span> <span class="pun">+</span><span class="pln"> SERVER_PORT </span><span class="pun">+</span> <span class="str">", please wait  ..."</span><span class="pun">);</span><span class="pln">
			serverSocket </span><span class="pun">=</span> <span class="kwd">new</span> <span class="typ">ServerSocket</span><span class="pun">(</span><span class="pln">SERVER_PORT</span><span class="pun">);</span>
			<span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"Server started: "</span> <span class="pun">+</span><span class="pln"> serverSocket</span><span class="pun">);</span>
			<span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"Waiting for a client ..."</span><span class="pun">);</span>
			<span class="kwd">while</span> <span class="pun">(</span><span class="kwd">true</span><span class="pun">)</span> <span class="pun">{</span>
				<span class="kwd">try</span> <span class="pun">{</span>
					<span class="typ">Socket</span><span class="pln"> socket </span><span class="pun">=</span><span class="pln"> serverSocket</span><span class="pun">.</span><span class="pln">accept</span><span class="pun">();</span>
					<span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"Client accepted: "</span> <span class="pun">+</span><span class="pln"> socket</span><span class="pun">);</span>

					<span class="typ">WorkerThread</span><span class="pln"> handler </span><span class="pun">=</span> <span class="kwd">new</span> <span class="typ">WorkerThread</span><span class="pun">(</span><span class="pln">socket</span><span class="pun">);</span><span class="pln">
					executor</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">(</span><span class="pln">handler</span><span class="pun">);</span>
				<span class="pun">}</span> <span class="kwd">catch</span> <span class="pun">(</span><span class="typ">IOException</span><span class="pln"> e</span><span class="pun">)</span> <span class="pun">{</span>
					<span class="typ">System</span><span class="pun">.</span><span class="pln">err</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">" Connection Error: "</span> <span class="pun">+</span><span class="pln"> e</span><span class="pun">);</span>
				<span class="pun">}</span>
			<span class="pun">}</span>
		<span class="pun">}</span> <span class="kwd">catch</span> <span class="pun">(</span><span class="typ">IOException</span><span class="pln"> e1</span><span class="pun">)</span> <span class="pun">{</span><span class="pln">
			e1</span><span class="pun">.</span><span class="pln">printStackTrace</span><span class="pun">();</span>
		<span class="pun">}</span> <span class="kwd">finally</span> <span class="pun">{</span>
			<span class="kwd">if</span> <span class="pun">(</span><span class="pln">serverSocket </span><span class="pun">!=</span> <span class="kwd">null</span><span class="pun">)</span> <span class="pun">{</span><span class="pln">
				serverSocket</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span>
			<span class="pun">}</span>
		<span class="pun">}</span>
	<span class="pun">}</span>

<span class="pun">}</span>
</pre></div><div class="bbCodeBlock-expandLink"><a class="expand">Xem tiếp...</a></div></div></div></div></div><p><strong>WorkerThread.java</strong></p><div class="code-content"><div class="code-expandContent"><pre class="brush: java; title: ; notranslate prettyprinted"><span class="kwd">package</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">gpcoder</span><span class="pun">.</span><span class="pln">tcp</span><span class="pun">;</span>

<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">IOException</span><span class="pun">;</span>
<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">InputStream</span><span class="pun">;</span>
<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">OutputStream</span><span class="pun">;</span>
<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.</span><span class="typ">Socket</span><span class="pun">;</span>

<span class="kwd">public</span> <span class="kwd">class</span> <span class="typ">WorkerThread</span> <span class="kwd">extends</span> <span class="typ">Thread</span> <span class="pun">{</span>
	<span class="kwd">private</span> <span class="typ">Socket</span><span class="pln"> socket</span><span class="pun">;</span>

	<span class="kwd">public</span> <span class="typ">WorkerThread</span><span class="pun">(</span><span class="typ">Socket</span><span class="pln"> socket</span><span class="pun">)</span> <span class="pun">{</span>
		<span class="kwd">this</span><span class="pun">.</span><span class="pln">socket </span><span class="pun">=</span><span class="pln"> socket</span><span class="pun">;</span>
	<span class="pun">}</span>

	<span class="kwd">public</span> <span class="kwd">void</span><span class="pln"> run</span><span class="pun">()</span> <span class="pun">{</span>
		<span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"Processing: "</span> <span class="pun">+</span><span class="pln"> socket</span><span class="pun">);</span>
		<span class="kwd">try</span> <span class="pun">{</span>
			<span class="typ">OutputStream</span><span class="pln"> os </span><span class="pun">=</span><span class="pln"> socket</span><span class="pun">.</span><span class="pln">getOutputStream</span><span class="pun">();</span>
			<span class="typ">InputStream</span> <span class="kwd">is</span> <span class="pun">=</span><span class="pln"> socket</span><span class="pun">.</span><span class="pln">getInputStream</span><span class="pun">();</span>
			<span class="kwd">while</span> <span class="pun">(</span><span class="kwd">true</span><span class="pun">)</span> <span class="pun">{</span>
				<span class="kwd">int</span><span class="pln"> ch </span><span class="pun">=</span> <span class="kwd">is</span><span class="pun">.</span><span class="pln">read</span><span class="pun">();</span> <span class="com">// Receive data from client</span>
				<span class="kwd">if</span> <span class="pun">(</span><span class="pln">ch </span><span class="pun">==</span> <span class="pun">-</span><span class="lit">1</span><span class="pun">)</span> <span class="pun">{</span>
					<span class="kwd">break</span><span class="pun">;</span>
				<span class="pun">}</span><span class="pln">
				os</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="pln">ch</span><span class="pun">);</span> <span class="com">// Send the results to client</span>
			<span class="pun">}</span>
		<span class="pun">}</span> <span class="kwd">catch</span> <span class="pun">(</span><span class="typ">IOException</span><span class="pln"> e</span><span class="pun">)</span> <span class="pun">{</span>
			<span class="typ">System</span><span class="pun">.</span><span class="pln">err</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"Request Processing Error: "</span> <span class="pun">+</span><span class="pln"> e</span><span class="pun">);</span>
		<span class="pun">}</span>
		<span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"Complete processing: "</span> <span class="pun">+</span><span class="pln"> socket</span><span class="pun">);</span>
	<span class="pun">}</span>
<span class="pun">}</span>
</pre></div><div class="bbCodeBlock-expandLink"><a class="expand">Xem tiếp...</a></div></div><div><div id="highlighter_258530" class="syntaxhighlighter code-block java"></div></div><p>Chạy chương trình Server, ta có kết quả sau:</p><figure class="alignnone size-full wp-image-30053 lazyloaded"><img src="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-multi-server-1-1.png" sizes="(max-width: 455px) 100vw, 455px" srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-multi-server-1-1.png 455w, https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-multi-server-1-1-300x53.png 300w" alt="Xây dựng ứng dụng Client-Server với Socket trong Java" width="455" height="81" loading="lazy" data-srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-multi-server-1-1.png 455w, https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-multi-server-1-1-300x53.png 300w" data-src="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-multi-server-1-1.png" data-sizes="(max-width: 455px) 100vw, 455px" data-is-external-image="true"></figure><p>Chạy liên tục 3 chương trình Client, ta có kết quả như sau:</p><figure class="alignnone size-full wp-image-30055 lazyloaded"><img src="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-multi-server-2-1.png" sizes="(max-width: 492px) 100vw, 492px" srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-multi-server-2-1.png 492w, https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-multi-server-2-1-300x132.png 300w" alt="Xây dựng ứng dụng Client-Server với Socket trong Java" width="492" height="216" loading="lazy" data-srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-multi-server-2-1.png 492w, https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-multi-server-2-1-300x132.png 300w" data-src="https://topdev.vn/blog/wp-content/uploads/2020/10/tcp-multi-server-2-1.png" data-sizes="(max-width: 492px) 100vw, 492px" data-is-external-image="true"></figure><p>Như bạn thấy, cả 3 chương trình Client đều được Server xử lý cùng lúc.</p><h3 id="xay-dung-chuong-trinh-client-server-o-che-do-khong-noi-ket-udp" class="ftwp-heading"><span id="Xay_dung_chuong_trinh_Client_8211_Server_o_che_do_khong_noi_ket_UDP">Xây dựng chương trình Client – Server ở chế độ không nối kết (UDP)</span></h3><p><span class="fontstyle0"><strong>UDP – User Datagram Protocol</strong> : cung cấp cơ chế vận chuyển không bảo đảm và không nối kết trên mạng IP, ngược với giao thức vận chuyển tin cậy, có nối kết TCP.</span></p><p><span class="fontstyle0">Cả giao thức TCP và UDP đều phân dữ liệu ra thành các gói tin. Tuy nhiên TCP có thêm vào những tiêu đề (Header) vào trong gói tin để cho phép truyền lại những gói tin thất lạc và tập hợp các gói tin lại theo thứ tự đúng đắn. UDP không cung cấp tính năng</span> <span class="fontstyle0">này, nếu một gói tin bị thất lạc hoặc bị lỗi, nó sẽ không được truyền lại, và thứ tự đến đích của các gói tin cũng không giống như thứ tự lúc nó được gởi đi.</span></p><p>Tuy nhiên, về tốc độ, UDP sẽ truyền nhanh gấp 3 lần TCP. Cho nên chúng thường <span class="fontstyle0">được dùng trong các ứng dụng đòi hỏi thời gian truyền tải ngắn và không cần tính chính xác cao, ví dụ truyền âm thanh, hình ảnh …</span></p><p><span class="fontstyle0">Mô hình client – server sử dụng lớp ServerSocket và Socket ở trên sử dụng giao thức TCP. Nếu muốn sử dụng mô hình client – server với giao thức UDP, ta sử dụng hai lớp java.net.</span><span class="fontstyle2">DatagramSocket </span><span class="fontstyle0">và java.net.</span><span class="fontstyle2">DatagramPacket</span><span class="fontstyle0">. </span></p><p><span class="fontstyle0">DatagramSocket được sử dụng để truyền và nhận các DatagramPacket. Dữ liệu được truyền đi là một mảng những byte, chúng được gói vào trong lớp DatagramPacket. Chiều dài của dữ liệu tối đa có thể đưa vào DatagramPacket là khoảng 60.000 byte (phụ thuộc vào dạng đường truyền). Ngoài ra DatagramPacket còn chứa địa chỉ IP và cổng của quá trình gởi và nhận dữ liệu.</span></p><p><span class="fontstyle0">Cổng trong giao thức TCP và UDP có thể trùng nhau. Trên cùng một máy tính, bạn có thể gán cổng 20 cho socket dùng giao thức TCP và cổng 20 cho socket sử dụng giao thức UDP.</span></p><p>Một số <span class="fontstyle0">phương thức cần thiết để xây dựng các chương trình Client-Server sử dụng socket ở chế độ không nối kết:</span></p><ul><li>public <strong>DatagramPacket(byte[] b, int n, InternetAddress ia, int port)</strong> :  Phương thức này cho phép tạo một DatagramPacket chứa dữ liệu và cả địa chỉ của máy nhận dữ liệu. Phương thức trả về một đối tượng thuộc lớp DatagramePacket.</li><li>public <strong>DatagramSocket( int port)</strong> :  Tạo Socket kiểu không nối kết cho Client với số hiệu cổng được xác định trong tham số (port). Nếu không xác định port, hệ thống tự động gán số hiệu cổng chưa sử dụng cho socket.</li><li>public void <strong>send(DatagramPacket dp)</strong> : Dùng để gởi một DatagramPacket đi.</li><li>public synchronized void <strong>receive(Datagrampacket dp)</strong> : Chờ nhận một DatagramPacket. Quá trình sẽ bị nghẽn cho đến khi có dữ liệu đến.</li></ul><p><strong>Các phương thức lấy thông tin trên một DatagramPacket nhận được:</strong></p><p>Khi nhận được một DatagramPacket từ một quá trình khác gởi đến, ta có thể lấy thông tin trên DatagramPacket này bằng các phương thức sau:</p><ul><li>public synchronized() InternetAddress <strong>getAddress()</strong> : Địa chỉ máy gởi.</li><li>public synchronized() int <strong>getPort()</strong> : Cổng của quá trình gởi.</li><li>public synchronized() byte[] <strong>getData()</strong> : Dữ liệu từ gói tin.</li><li>public synchronized() int <strong>getLength()</strong> : Chiều dài của dữ liệu trong gói tin.</li></ul><p><strong>Các phương thức đặt thông tin cho gói tin gởi:</strong></p><p>Trước khi gởi một DatagramPacket đi, ta có thể đặt thông tin trên DatagramPacket này bằng các phương thức sau:</p><ul><li>public synchronized() void <strong>setAddress(IntermetAddress address)</strong> : Đặt địa chỉ máy nhận.</li><li>public synchronized() void setPort<strong>(int port)</strong> : Đặt cổng quá trình nhận.</li><li>public synchronized() void setData<strong>(byte buffer[])</strong> : Đặt dữ liệu gởi.</li><li>public synchronized() void setLength<strong>(int len)</strong> : Đặt chiều dài dữ liệu gởi.</li></ul><h4 id="xay-dung-chuong-trinh-server-o-che-do-khong-noi-ket" class="ftwp-heading"><span id="Xay_dung_chuong_trinh_Server_o_che_do_khong_noi_ket">Xây dựng chương trình Server ở chế độ không nối kết</span></h4><p>Chương trình EchoServer cài đặt Echo Server ở chế độ không nối kết, cổng mặc định là 7. Chương trình chờ nhận từng gói tin, lấy dữ liệu ra khỏi gói tin nhận được và gởi ngược dữ liệu đó về Client.</p><div class="code-content"><div class="code-expandContent"><pre class="brush: java; title: ; notranslate prettyprinted"><span class="kwd">package</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">gpcoder</span><span class="pun">.</span><span class="pln">udp</span><span class="pun">;</span>

<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">IOException</span><span class="pun">;</span>
<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.</span><span class="typ">DatagramPacket</span><span class="pun">;</span>
<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.</span><span class="typ">DatagramSocket</span><span class="pun">;</span>

<span class="kwd">public</span> <span class="kwd">class</span> <span class="typ">EchoServer</span> <span class="pun">{</span>

	<span class="kwd">public</span> <span class="kwd">final</span> <span class="kwd">static</span> <span class="kwd">int</span><span class="pln"> SERVER_PORT </span><span class="pun">=</span> <span class="lit">7</span><span class="pun">;</span> <span class="com">// Cổng mặc định của Echo Server</span>
	<span class="kwd">public</span> <span class="kwd">final</span> <span class="kwd">static</span> <span class="kwd">byte</span><span class="pun">[]</span><span class="pln"> BUFFER </span><span class="pun">=</span> <span class="kwd">new</span> <span class="kwd">byte</span><span class="pun">[</span><span class="lit">4096</span><span class="pun">];</span> <span class="com">// Vùng đệm chứa dữ liệu cho gói tin nhận</span>

	<span class="kwd">public</span> <span class="kwd">static</span> <span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pun">[]</span><span class="pln"> args</span><span class="pun">)</span> <span class="pun">{</span>
		<span class="typ">DatagramSocket</span><span class="pln"> ds </span><span class="pun">=</span> <span class="kwd">null</span><span class="pun">;</span>
		<span class="kwd">try</span> <span class="pun">{</span>
			<span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"Binding to port "</span> <span class="pun">+</span><span class="pln"> SERVER_PORT </span><span class="pun">+</span> <span class="str">", please wait  ..."</span><span class="pun">);</span><span class="pln">
			ds </span><span class="pun">=</span> <span class="kwd">new</span> <span class="typ">DatagramSocket</span><span class="pun">(</span><span class="pln">SERVER_PORT</span><span class="pun">);</span> <span class="com">// Tạo Socket với cổng là 7</span>
			<span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"Server started "</span><span class="pun">);</span>
			<span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"Waiting for messages from Client ... "</span><span class="pun">);</span>

			<span class="kwd">while</span> <span class="pun">(</span><span class="kwd">true</span><span class="pun">)</span> <span class="pun">{</span> <span class="com">// Tạo gói tin nhận</span>
				<span class="typ">DatagramPacket</span><span class="pln"> incoming </span><span class="pun">=</span> <span class="kwd">new</span> <span class="typ">DatagramPacket</span><span class="pun">(</span><span class="pln">BUFFER</span><span class="pun">,</span><span class="pln"> BUFFER</span><span class="pun">.</span><span class="pln">length</span><span class="pun">);</span><span class="pln">
				ds</span><span class="pun">.</span><span class="pln">receive</span><span class="pun">(</span><span class="pln">incoming</span><span class="pun">);</span> <span class="com">// Chờ nhận gói tin gởi đến</span>

				<span class="com">// Lấy dữ liệu khỏi gói tin nhận</span>
				<span class="typ">String</span><span class="pln"> message </span><span class="pun">=</span> <span class="kwd">new</span> <span class="typ">String</span><span class="pun">(</span><span class="pln">incoming</span><span class="pun">.</span><span class="pln">getData</span><span class="pun">(),</span> <span class="lit">0</span><span class="pun">,</span><span class="pln"> incoming</span><span class="pun">.</span><span class="pln">getLength</span><span class="pun">());</span>
				<span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"Received: "</span> <span class="pun">+</span><span class="pln"> message</span><span class="pun">);</span>

				<span class="com">// Tạo gói tin gởi chứa dữ liệu vừa nhận được</span>
				<span class="typ">DatagramPacket</span><span class="pln"> outsending </span><span class="pun">=</span> <span class="kwd">new</span> <span class="typ">DatagramPacket</span><span class="pun">(</span><span class="pln">message</span><span class="pun">.</span><span class="pln">getBytes</span><span class="pun">(),</span><span class="pln"> incoming</span><span class="pun">.</span><span class="pln">getLength</span><span class="pun">(),</span><span class="pln">
						incoming</span><span class="pun">.</span><span class="pln">getAddress</span><span class="pun">(),</span><span class="pln"> incoming</span><span class="pun">.</span><span class="pln">getPort</span><span class="pun">());</span><span class="pln">
				ds</span><span class="pun">.</span><span class="pln">send</span><span class="pun">(</span><span class="pln">outsending</span><span class="pun">);</span>
			<span class="pun">}</span>
		<span class="pun">}</span> <span class="kwd">catch</span> <span class="pun">(</span><span class="typ">IOException</span><span class="pln"> e</span><span class="pun">)</span> <span class="pun">{</span><span class="pln">
			e</span><span class="pun">.</span><span class="pln">printStackTrace</span><span class="pun">();</span>
		<span class="pun">}</span> <span class="kwd">finally</span> <span class="pun">{</span>
			<span class="kwd">if</span> <span class="pun">(</span><span class="pln">ds </span><span class="pun">!=</span> <span class="kwd">null</span><span class="pun">)</span> <span class="pun">{</span><span class="pln">
				ds</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span>
			<span class="pun">}</span>
		<span class="pun">}</span>
	<span class="pun">}</span>
<span class="pun">}</span>
</pre></div><div class="bbCodeBlock-expandLink"><a class="expand">Xem tiếp...</a></div></div><h4 id="xay-dung-chuong-trinh-client-o-che-do-khong-noi-ket" class="ftwp-heading"><span id="Xay_dung_chuong_trinh_Client_o_che_do_khong_noi_ket">Xây dựng chương trình Client ở chế độ không nối kết</span></h4><p>Chương trình này cho phép người sử dụng nhận các chuỗi từ bàn phím, gởi chuỗi sang EchoServer ở chế độ không nối kết ở cổng số 7, chờ nhận và in dữ liệu từ Server gởi về ra màn hình.</p><div class="code-content"><div class="code-expandContent"><pre class="brush: java; title: ; notranslate prettyprinted"><span class="kwd">package</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">gpcoder</span><span class="pun">.</span><span class="pln">udp</span><span class="pun">;</span>

<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">BufferedReader</span><span class="pun">;</span>
<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">IOException</span><span class="pun">;</span>
<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">InputStreamReader</span><span class="pun">;</span>
<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.</span><span class="typ">DatagramPacket</span><span class="pun">;</span>
<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.</span><span class="typ">DatagramSocket</span><span class="pun">;</span>
<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.</span><span class="typ">InetAddress</span><span class="pun">;</span>

<span class="kwd">public</span> <span class="kwd">class</span> <span class="typ">EchoClient</span> <span class="pun">{</span>

	<span class="kwd">public</span> <span class="kwd">final</span> <span class="kwd">static</span> <span class="typ">String</span><span class="pln"> SERVER_IP </span><span class="pun">=</span> <span class="str">"127.0.0.1"</span><span class="pun">;</span>
	<span class="kwd">public</span> <span class="kwd">final</span> <span class="kwd">static</span> <span class="kwd">int</span><span class="pln"> SERVER_PORT </span><span class="pun">=</span> <span class="lit">7</span><span class="pun">;</span> <span class="com">// Cổng mặc định của Echo Server</span>
	<span class="kwd">public</span> <span class="kwd">final</span> <span class="kwd">static</span> <span class="kwd">byte</span><span class="pun">[]</span><span class="pln"> BUFFER </span><span class="pun">=</span> <span class="kwd">new</span> <span class="kwd">byte</span><span class="pun">[</span><span class="lit">4096</span><span class="pun">];</span> <span class="com">// Vùng đệm chứa dữ liệu cho gói tin nhận</span>

	<span class="kwd">public</span> <span class="kwd">static</span> <span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pun">[]</span><span class="pln"> args</span><span class="pun">)</span> <span class="pun">{</span>
		<span class="typ">DatagramSocket</span><span class="pln"> ds </span><span class="pun">=</span> <span class="kwd">null</span><span class="pun">;</span>
		<span class="kwd">try</span> <span class="pun">{</span><span class="pln">
			ds </span><span class="pun">=</span> <span class="kwd">new</span> <span class="typ">DatagramSocket</span><span class="pun">();</span> <span class="com">// Tạo DatagramSocket</span>
			<span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"Client started "</span><span class="pun">);</span>

			<span class="typ">InetAddress</span><span class="pln"> server </span><span class="pun">=</span> <span class="typ">InetAddress</span><span class="pun">.</span><span class="pln">getByName</span><span class="pun">(</span><span class="pln">SERVER_IP</span><span class="pun">);</span>
			<span class="kwd">while</span> <span class="pun">(</span><span class="kwd">true</span><span class="pun">)</span> <span class="pun">{</span>
				<span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"Enter your message: "</span><span class="pun">);</span>
				<span class="typ">InputStreamReader</span><span class="pln"> isr </span><span class="pun">=</span> <span class="kwd">new</span> <span class="typ">InputStreamReader</span><span class="pun">(</span><span class="typ">System</span><span class="pun">.</span><span class="kwd">in</span><span class="pun">);</span> <span class="com">// Nhập</span>
				<span class="typ">BufferedReader</span><span class="pln"> br </span><span class="pun">=</span> <span class="kwd">new</span> <span class="typ">BufferedReader</span><span class="pun">(</span><span class="pln">isr</span><span class="pun">);</span> <span class="com">// một chuỗi</span>
				<span class="typ">String</span><span class="pln"> theString </span><span class="pun">=</span><span class="pln"> br</span><span class="pun">.</span><span class="pln">readLine</span><span class="pun">();</span> <span class="com">// từ bàn phím</span>
				<span class="kwd">byte</span><span class="pun">[]</span><span class="pln"> data </span><span class="pun">=</span><span class="pln"> theString</span><span class="pun">.</span><span class="pln">getBytes</span><span class="pun">();</span> <span class="com">// Đổi chuỗi ra mảng bytes</span>

				<span class="com">// Tạo gói tin gởi</span>
				<span class="typ">DatagramPacket</span><span class="pln"> dp </span><span class="pun">=</span> <span class="kwd">new</span> <span class="typ">DatagramPacket</span><span class="pun">(</span><span class="pln">data</span><span class="pun">,</span><span class="pln"> data</span><span class="pun">.</span><span class="pln">length</span><span class="pun">,</span><span class="pln"> server</span><span class="pun">,</span><span class="pln"> SERVER_PORT</span><span class="pun">);</span><span class="pln">
				ds</span><span class="pun">.</span><span class="pln">send</span><span class="pun">(</span><span class="pln">dp</span><span class="pun">);</span> <span class="com">// Send gói tin sang Echo Server</span>

				<span class="com">// Gói tin nhận</span>
				<span class="typ">DatagramPacket</span><span class="pln"> incoming </span><span class="pun">=</span> <span class="kwd">new</span> <span class="typ">DatagramPacket</span><span class="pun">(</span><span class="pln">BUFFER</span><span class="pun">,</span><span class="pln"> BUFFER</span><span class="pun">.</span><span class="pln">length</span><span class="pun">);</span><span class="pln">
				ds</span><span class="pun">.</span><span class="pln">receive</span><span class="pun">(</span><span class="pln">incoming</span><span class="pun">);</span> <span class="com">// Chờ nhận dữ liệu từ EchoServer gởi về</span>

				<span class="com">// Đổi dữ liệu nhận được dạng mảng bytes ra chuỗi và in ra màn hình</span>
				<span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"Received: "</span> <span class="pun">+</span> <span class="kwd">new</span> <span class="typ">String</span><span class="pun">(</span><span class="pln">incoming</span><span class="pun">.</span><span class="pln">getData</span><span class="pun">(),</span> <span class="lit">0</span><span class="pun">,</span><span class="pln"> incoming</span><span class="pun">.</span><span class="pln">getLength</span><span class="pun">()));</span>
			<span class="pun">}</span>
		<span class="pun">}</span> <span class="kwd">catch</span> <span class="pun">(</span><span class="typ">IOException</span><span class="pln"> e</span><span class="pun">)</span> <span class="pun">{</span>
			<span class="typ">System</span><span class="pun">.</span><span class="pln">err</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="pln">e</span><span class="pun">);</span>
		<span class="pun">}</span> <span class="kwd">finally</span> <span class="pun">{</span>
			<span class="kwd">if</span> <span class="pun">(</span><span class="pln">ds </span><span class="pun">!=</span> <span class="kwd">null</span><span class="pun">)</span> <span class="pun">{</span><span class="pln">
				ds</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span>
			<span class="pun">}</span>
		<span class="pun">}</span>
	<span class="pun">}</span>
<span class="pun">}</span>
</pre></div><div class="bbCodeBlock-expandLink"><a class="expand">Xem tiếp...</a></div></div><p>Chạy chương trình Server, ta có kết quả như sau:</p><figure class="alignnone size-full wp-image-30056 lazyloaded"><img src="https://topdev.vn/blog/wp-content/uploads/2020/10/udp-server-1.png" sizes="(max-width: 422px) 100vw, 422px" srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/udp-server-1.png 422w, https://topdev.vn/blog/wp-content/uploads/2020/10/udp-server-1-300x48.png 300w" alt="Xây dựng ứng dụng Client-Server với Socket trong Java" width="422" height="68" loading="lazy" data-srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/udp-server-1.png 422w, https://topdev.vn/blog/wp-content/uploads/2020/10/udp-server-1-300x48.png 300w" data-src="https://topdev.vn/blog/wp-content/uploads/2020/10/udp-server-1.png" data-sizes="(max-width: 422px) 100vw, 422px" data-is-external-image="true"></figure><p>Chạy chương trình Client, ta có kết quả như sau:</p><figure class="alignnone size-full wp-image-30057 lazyloaded"><img src="https://topdev.vn/blog/wp-content/uploads/2020/10/udp-client-1.png" sizes="(max-width: 441px) 100vw, 441px" srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/udp-client-1.png 441w, https://topdev.vn/blog/wp-content/uploads/2020/10/udp-client-1-300x43.png 300w" alt="Xây dựng ứng dụng Client-Server với Socket trong Java" width="441" height="63" loading="lazy" data-srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/udp-client-1.png 441w, https://topdev.vn/blog/wp-content/uploads/2020/10/udp-client-1-300x43.png 300w" data-src="https://topdev.vn/blog/wp-content/uploads/2020/10/udp-client-1.png" data-sizes="(max-width: 441px) 100vw, 441px" data-is-external-image="true"></figure><p>Tại Client, nhập nội dung message là <em>Hello</em>. Ta có kết quả như sau:</p><figure class="alignnone size-full wp-image-30058 lazyloaded"><img src="https://topdev.vn/blog/wp-content/uploads/2020/10/udp-client-2.png" sizes="(max-width: 439px) 100vw, 439px" srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/udp-client-2.png 439w, https://topdev.vn/blog/wp-content/uploads/2020/10/udp-client-2-300x66.png 300w" alt="Xây dựng ứng dụng Client-Server với Socket trong Java" width="439" height="96" loading="lazy" data-srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/udp-client-2.png 439w, https://topdev.vn/blog/wp-content/uploads/2020/10/udp-client-2-300x66.png 300w" data-src="https://topdev.vn/blog/wp-content/uploads/2020/10/udp-client-2.png" data-sizes="(max-width: 439px) 100vw, 439px" data-is-external-image="true"></figure><figure class="alignnone size-full wp-image-30059 lazyloaded"><img src="https://topdev.vn/blog/wp-content/uploads/2020/10/udp-server-2.png" sizes="(max-width: 424px) 100vw, 424px" srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/udp-server-2.png 424w, https://topdev.vn/blog/wp-content/uploads/2020/10/udp-server-2-300x62.png 300w" alt="Xây dựng ứng dụng Client-Server với Socket trong Java" width="424" height="88" loading="lazy" data-srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/udp-server-2.png 424w, https://topdev.vn/blog/wp-content/uploads/2020/10/udp-server-2-300x62.png 300w" data-src="https://topdev.vn/blog/wp-content/uploads/2020/10/udp-server-2.png" data-sizes="(max-width: 424px) 100vw, 424px" data-is-external-image="true"></figure><p>Tại Cient, tiếp tục nhập nội dung là <em>How are you</em>. Ta có kết quả như sau:</p><figure class="alignnone size-full wp-image-30060 lazyloaded"><img src="https://topdev.vn/blog/wp-content/uploads/2020/10/udp-client-3.png" sizes="(max-width: 438px) 100vw, 438px" srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/udp-client-3.png 438w, https://topdev.vn/blog/wp-content/uploads/2020/10/udp-client-3-300x97.png 300w" alt="Xây dựng ứng dụng Client-Server với Socket trong Java" width="438" height="141" loading="lazy" data-srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/udp-client-3.png 438w, https://topdev.vn/blog/wp-content/uploads/2020/10/udp-client-3-300x97.png 300w" data-src="https://topdev.vn/blog/wp-content/uploads/2020/10/udp-client-3.png" data-sizes="(max-width: 438px) 100vw, 438px" data-is-external-image="true"></figure><figure class="alignnone size-full wp-image-30061 lazyloaded"><img src="https://topdev.vn/blog/wp-content/uploads/2020/10/udp-server-3.png" sizes="(max-width: 420px) 100vw, 420px" srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/udp-server-3.png 420w, https://topdev.vn/blog/wp-content/uploads/2020/10/udp-server-3-300x74.png 300w" alt="Xây dựng ứng dụng Client-Server với Socket trong Java" width="420" height="103" loading="lazy" data-srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/udp-server-3.png 420w, https://topdev.vn/blog/wp-content/uploads/2020/10/udp-server-3-300x74.png 300w" data-src="https://topdev.vn/blog/wp-content/uploads/2020/10/udp-server-3.png" data-sizes="(max-width: 420px) 100vw, 420px" data-is-external-image="true"></figure><h3 id="xay-dung-chuong-trinh-client-server-noi-ket-theo-dang-multicast-truyen-theo-nhom" class="ftwp-heading"><span id="Xay_dung_chuong_trinh_Client-Server_noi_ket_theo_dang_multicast_truyen_theo_nhom">Xây dựng chương trình Client-Server nối kết theo dạng multicast (truyền theo nhóm)</span></h3><p>Các cơ chế Socket TCP và UDP đã giới thiệu ở trên đề gọi là unicast, nghĩa là giao tiếp chỉ diễn ra giữa một máy tính gửi và một máy tính nhận.</p><p>Multicast là việc gửi quảng bá (broadcast) nhưng đến một nhóm máy tính ở cùng một địa chỉ cho trước. Địa chỉ multicast là địa chỉ lớp D được xác định trong khoảng 244.0.0.0 đến 239.255.255.255. Địa chỉ 244.0.0.0 là địa chỉ riêng nên không sử dụng được.</p><p>Multicast được sử dụng trong game nhiều người chơi, trong những ứng dụng mà đối tượng là nhiều thiết bị hay nhiều máy tính cùng nhận một loại thông tin. Multicast cũng được sử dụng trong giải thuật vạch đường (Routing Protocol), khi các router muốn cập nhật thông tin với nhau.</p><p>Java hỗ trợ Multicast thông qua lớp java.net.MulticastSocket. Một Multicast Socket là 1 DatagramSocket (UDP) có khả năng gia nhập (joining) vào một nhóm các máy tính multicast trên mạng. Khi một máy tính nào gửi thông điệp đến nhóm thì tất cả các máy tính trong đó đều nhận được.</p><figure class="alignnone size-full wp-image-30062 lazyloaded"><img src="https://topdev.vn/blog/wp-content/uploads/2020/10/java-multicast.png" sizes="(max-width: 661px) 100vw, 661px" srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/java-multicast.png 661w, https://topdev.vn/blog/wp-content/uploads/2020/10/java-multicast-300x203.png 300w, https://topdev.vn/blog/wp-content/uploads/2020/10/java-multicast-620x420.png 620w" alt="Xây dựng ứng dụng Client-Server với Socket trong Java" width="661" height="448" loading="lazy" data-srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/java-multicast.png 661w, https://topdev.vn/blog/wp-content/uploads/2020/10/java-multicast-300x203.png 300w, https://topdev.vn/blog/wp-content/uploads/2020/10/java-multicast-620x420.png 620w" data-src="https://topdev.vn/blog/wp-content/uploads/2020/10/java-multicast.png" data-sizes="(max-width: 661px) 100vw, 661px" data-is-external-image="true"></figure><p>Một số <span class="fontstyle0">phương thức cần thiết để xây dựng các chương trình Multicast:</span></p><ul><li>public <strong>MulticastSocket(int port)</strong>: Tạo Socket kiểu Multicast với số hiệu cổng được xác định trong tham số (port).</li><li>public void <strong>joinGroup(InetAddress group)</strong> : Tham gia nhóm Multicast tại địa chỉ xác định.</li><li>public void <strong>leaveGroup(InetAddress group)</strong> : Rời khỏi nhóm Multicast tại địa chỉ xác định.</li><li>public void <strong>send(DatagramPacket dp)</strong> : Dùng để gởi một DatagramPacket đi.<br>public synchronized void <strong>receive(Datagrampacket dp)</strong> : Chờ nhận một DatagramPacket.</li></ul><p>Ví dụ:</p><p>Cài đặt một dịch vụ gởi tin nhắn trên cổng <em>8888</em>, tại địa chỉ <em>224.0.0.1</em>. Khi Client muốn nhận tin nhắn thì Join Group tại địa chỉ và cổng trên.</p><p><strong>Lớp Sender</strong></p><div class="code-content"><div class="code-expandContent"><pre class="brush: java; title: ; notranslate prettyprinted"><span class="kwd">package</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">gpcoder</span><span class="pun">.</span><span class="pln">multicast</span><span class="pun">;</span>

<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">IOException</span><span class="pun">;</span>
<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.</span><span class="typ">DatagramPacket</span><span class="pun">;</span>
<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.</span><span class="typ">DatagramSocket</span><span class="pun">;</span>
<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.</span><span class="typ">InetAddress</span><span class="pun">;</span>

<span class="kwd">public</span> <span class="kwd">class</span> <span class="typ">MulticastSender</span> <span class="pun">{</span>

	<span class="kwd">public</span> <span class="kwd">static</span> <span class="kwd">final</span> <span class="typ">String</span><span class="pln"> GROUP_ADDRESS </span><span class="pun">=</span> <span class="str">"224.0.0.1"</span><span class="pun">;</span>
	<span class="kwd">public</span> <span class="kwd">static</span> <span class="kwd">final</span> <span class="kwd">int</span><span class="pln"> PORT </span><span class="pun">=</span> <span class="lit">8888</span><span class="pun">;</span>

	<span class="kwd">public</span> <span class="kwd">static</span> <span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pun">[]</span><span class="pln"> args</span><span class="pun">)</span> <span class="kwd">throws</span> <span class="typ">InterruptedException</span> <span class="pun">{</span>
		<span class="typ">DatagramSocket</span><span class="pln"> socket </span><span class="pun">=</span> <span class="kwd">null</span><span class="pun">;</span>
		<span class="kwd">try</span> <span class="pun">{</span>
			<span class="com">// Get the address that we are going to connect to.</span>
			<span class="typ">InetAddress</span><span class="pln"> address </span><span class="pun">=</span> <span class="typ">InetAddress</span><span class="pun">.</span><span class="pln">getByName</span><span class="pun">(</span><span class="pln">GROUP_ADDRESS</span><span class="pun">);</span>

			<span class="com">// Create a new Multicast socket</span><span class="pln">
			socket </span><span class="pun">=</span> <span class="kwd">new</span> <span class="typ">DatagramSocket</span><span class="pun">();</span>

			<span class="typ">DatagramPacket</span><span class="pln"> outPacket </span><span class="pun">=</span> <span class="kwd">null</span><span class="pun">;</span>
			<span class="kwd">long</span><span class="pln"> counter </span><span class="pun">=</span> <span class="lit">0</span><span class="pun">;</span>
			<span class="kwd">while</span> <span class="pun">(</span><span class="kwd">true</span><span class="pun">)</span> <span class="pun">{</span>
				<span class="typ">String</span><span class="pln"> msg </span><span class="pun">=</span> <span class="str">"Sent message No. "</span> <span class="pun">+</span><span class="pln"> counter</span><span class="pun">;</span><span class="pln">
				counter</span><span class="pun">++;</span><span class="pln">
				outPacket </span><span class="pun">=</span> <span class="kwd">new</span> <span class="typ">DatagramPacket</span><span class="pun">(</span><span class="pln">msg</span><span class="pun">.</span><span class="pln">getBytes</span><span class="pun">(),</span><span class="pln"> msg</span><span class="pun">.</span><span class="pln">getBytes</span><span class="pun">().</span><span class="pln">length</span><span class="pun">,</span><span class="pln"> address</span><span class="pun">,</span><span class="pln"> PORT</span><span class="pun">);</span><span class="pln">
				socket</span><span class="pun">.</span><span class="pln">send</span><span class="pun">(</span><span class="pln">outPacket</span><span class="pun">);</span>
				<span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"Server sent packet with msg: "</span> <span class="pun">+</span><span class="pln"> msg</span><span class="pun">);</span>
				<span class="typ">Thread</span><span class="pun">.</span><span class="pln">sleep</span><span class="pun">(</span><span class="lit">1000</span><span class="pun">);</span> <span class="com">// Sleep 1 second before sending the next message</span>
			<span class="pun">}</span>
		<span class="pun">}</span> <span class="kwd">catch</span> <span class="pun">(</span><span class="typ">IOException</span><span class="pln"> ex</span><span class="pun">)</span> <span class="pun">{</span><span class="pln">
			ex</span><span class="pun">.</span><span class="pln">printStackTrace</span><span class="pun">();</span>
		<span class="pun">}</span> <span class="kwd">finally</span> <span class="pun">{</span>
			<span class="kwd">if</span> <span class="pun">(</span><span class="pln">socket </span><span class="pun">!=</span> <span class="kwd">null</span><span class="pun">)</span> <span class="pun">{</span><span class="pln">
				socket</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span>
			<span class="pun">}</span>
		<span class="pun">}</span>
	<span class="pun">}</span>
<span class="pun">}</span>
</pre></div><div class="bbCodeBlock-expandLink"><a class="expand">Xem tiếp...</a></div></div><p><strong>Lớp Receiver</strong></p><div class="code-content"><div class="code-expandContent"><pre class="brush: java; title: ; notranslate prettyprinted"><span class="kwd">package</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">gpcoder</span><span class="pun">.</span><span class="pln">multicast</span><span class="pun">;</span>

<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">IOException</span><span class="pun">;</span>
<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.</span><span class="typ">DatagramPacket</span><span class="pun">;</span>
<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.</span><span class="typ">InetAddress</span><span class="pun">;</span>
<span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.</span><span class="typ">MulticastSocket</span><span class="pun">;</span>

<span class="kwd">public</span> <span class="kwd">class</span> <span class="typ">MulticastReceiver</span> <span class="pun">{</span>

	<span class="kwd">public</span> <span class="kwd">static</span> <span class="kwd">final</span> <span class="kwd">byte</span><span class="pun">[]</span><span class="pln"> BUFFER </span><span class="pun">=</span> <span class="kwd">new</span> <span class="kwd">byte</span><span class="pun">[</span><span class="lit">4096</span><span class="pun">];</span>

	<span class="kwd">public</span> <span class="kwd">static</span> <span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pun">[]</span><span class="pln"> args</span><span class="pun">)</span> <span class="pun">{</span>
		<span class="typ">MulticastSocket</span><span class="pln"> socket </span><span class="pun">=</span> <span class="kwd">null</span><span class="pun">;</span>
		<span class="typ">DatagramPacket</span><span class="pln"> inPacket </span><span class="pun">=</span> <span class="kwd">null</span><span class="pun">;</span>
		<span class="kwd">try</span> <span class="pun">{</span>
			<span class="com">// Get the address that we are going to connect to.</span>
			<span class="typ">InetAddress</span><span class="pln"> address </span><span class="pun">=</span> <span class="typ">InetAddress</span><span class="pun">.</span><span class="pln">getByName</span><span class="pun">(</span><span class="typ">MulticastSender</span><span class="pun">.</span><span class="pln">GROUP_ADDRESS</span><span class="pun">);</span>

			<span class="com">// Create a new Multicast socket</span><span class="pln">
			socket </span><span class="pun">=</span> <span class="kwd">new</span> <span class="typ">MulticastSocket</span><span class="pun">(</span><span class="typ">MulticastSender</span><span class="pun">.</span><span class="pln">PORT</span><span class="pun">);</span>

			<span class="com">// Joint the Multicast group</span><span class="pln">
			socket</span><span class="pun">.</span><span class="pln">joinGroup</span><span class="pun">(</span><span class="pln">address</span><span class="pun">);</span>

			<span class="kwd">while</span> <span class="pun">(</span><span class="kwd">true</span><span class="pun">)</span> <span class="pun">{</span>
				<span class="com">// Receive the information and print it.</span><span class="pln">
				inPacket </span><span class="pun">=</span> <span class="kwd">new</span> <span class="typ">DatagramPacket</span><span class="pun">(</span><span class="pln">BUFFER</span><span class="pun">,</span><span class="pln"> BUFFER</span><span class="pun">.</span><span class="pln">length</span><span class="pun">);</span><span class="pln">
				socket</span><span class="pun">.</span><span class="pln">receive</span><span class="pun">(</span><span class="pln">inPacket</span><span class="pun">);</span>
				<span class="typ">String</span><span class="pln"> msg </span><span class="pun">=</span> <span class="kwd">new</span> <span class="typ">String</span><span class="pun">(</span><span class="pln">BUFFER</span><span class="pun">,</span> <span class="lit">0</span><span class="pun">,</span><span class="pln"> inPacket</span><span class="pun">.</span><span class="pln">getLength</span><span class="pun">());</span>
				<span class="typ">System</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"From "</span> <span class="pun">+</span><span class="pln"> inPacket</span><span class="pun">.</span><span class="pln">getAddress</span><span class="pun">()</span> <span class="pun">+</span> <span class="str">" Msg : "</span> <span class="pun">+</span><span class="pln"> msg</span><span class="pun">);</span>
			<span class="pun">}</span>
		<span class="pun">}</span> <span class="kwd">catch</span> <span class="pun">(</span><span class="typ">IOException</span><span class="pln"> ex</span><span class="pun">)</span> <span class="pun">{</span><span class="pln">
			ex</span><span class="pun">.</span><span class="pln">printStackTrace</span><span class="pun">();</span>
		<span class="pun">}</span>
	<span class="pun">}</span>
<span class="pun">}</span>
</pre></div><div class="bbCodeBlock-expandLink"><a class="expand">Xem tiếp...</a></div></div><div><div id="highlighter_706722" class="syntaxhighlighter code-block java"></div></div><p>Chạy chương trình MulticastSender, sau đó start tiếp một vài chương trình MulticastReceiver. Chúng ta nhận được kết quả như sau:</p><figure class="alignnone size-full wp-image-30063 lazyloaded"><img src="https://topdev.vn/blog/wp-content/uploads/2020/10/multicast-server-sender.png" sizes="(max-width: 446px) 100vw, 446px" srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/multicast-server-sender.png 446w, https://topdev.vn/blog/wp-content/uploads/2020/10/multicast-server-sender-300x174.png 300w" alt="Xây dựng ứng dụng Client-Server với Socket trong Java" width="446" height="258" loading="lazy" data-srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/multicast-server-sender.png 446w, https://topdev.vn/blog/wp-content/uploads/2020/10/multicast-server-sender-300x174.png 300w" data-src="https://topdev.vn/blog/wp-content/uploads/2020/10/multicast-server-sender.png" data-sizes="(max-width: 446px) 100vw, 446px" data-is-external-image="true"></figure><figure class="alignnone size-full wp-image-30064 lazyloaded"><img src="https://topdev.vn/blog/wp-content/uploads/2020/10/multicast-client-receiver-1.png" sizes="(max-width: 457px) 100vw, 457px" srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/multicast-client-receiver-1.png 457w, https://topdev.vn/blog/wp-content/uploads/2020/10/multicast-client-receiver-1-300x148.png 300w, https://topdev.vn/blog/wp-content/uploads/2020/10/multicast-client-receiver-1-324x160.png 324w" alt="Xây dựng ứng dụng Client-Server với Socket trong Java" width="457" height="226" loading="lazy" data-srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/multicast-client-receiver-1.png 457w, https://topdev.vn/blog/wp-content/uploads/2020/10/multicast-client-receiver-1-300x148.png 300w, https://topdev.vn/blog/wp-content/uploads/2020/10/multicast-client-receiver-1-324x160.png 324w" data-src="https://topdev.vn/blog/wp-content/uploads/2020/10/multicast-client-receiver-1.png" data-sizes="(max-width: 457px) 100vw, 457px" data-is-external-image="true"></figure><figure class="alignnone size-full wp-image-30065 lazyloaded"><img src="https://topdev.vn/blog/wp-content/uploads/2020/10/multicast-client-receiver-2.png" sizes="(max-width: 455px) 100vw, 455px" srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/multicast-client-receiver-2.png 455w, https://topdev.vn/blog/wp-content/uploads/2020/10/multicast-client-receiver-2-300x139.png 300w" alt="Xây dựng ứng dụng Client-Server với Socket trong Java" width="455" height="211" loading="lazy" data-srcset="https://topdev.vn/blog/wp-content/uploads/2020/10/multicast-client-receiver-2.png 455w, https://topdev.vn/blog/wp-content/uploads/2020/10/multicast-client-receiver-2-300x139.png 300w" data-src="https://topdev.vn/blog/wp-content/uploads/2020/10/multicast-client-receiver-2.png" data-sizes="(max-width: 455px) 100vw, 455px" data-is-external-image="true"></figure><p>Như bạn thấy, bất kỳ client nào join group đều nhận được nội dung message giống nhau, và nhận cùng thời điểm. Chương trình Multicast Server vẫn phục vụ theo dạng UDP, chỉ khác là sẽ gửi gói tin Datagram đến địa chỉ IP thuộc lớp <strong>D</strong>.</p></div><footer class="post__inner post__footer"><p class="post__last-updated">This article was updated on tháng 12 31, 2024</p><div class="post__share-tag-container"><div class="post__tag"><h3>Tagged in:</h3><ul><li><a href="https://theanh412.github.io/myblog/tags/blogs/">Blogs</a></li></ul></div><div class="post__share"><button class="post__share-button js-post__share-button icon" aria-label="Share button"><i class="fas fa-share-alt"></i></button><div class="post__share-popup js-post__share-popup"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ftheanh412.github.io%2Fmyblog%2Fxay-dung-ung-dung-client-server-voi-socket-trong-java.html" class="js-share icon brands fa-facebook-f" rel="nofollow noopener noreferrer"><span class="label">Facebook</span></a></div></div></div><div class="post__bio"><img src="https://theanh412.github.io/myblog/media/website/hinh.jpg" loading="lazy" height="540" width="540" alt="TheAnh"><div><h3><a href="https://theanh412.github.io/myblog/authors/theanh/" class="invert" rel="author">TheAnh</a></h3></div></div></footer></article><div><strong>You should also read:</strong></div><div class="posts"><article><header><time datetime="2024-12-31T19:58" class="date">tháng 12 31, 2024</time><h2><a href="https://theanh412.github.io/myblog/certificate-javascript-essentials-2.html">Certificate: JavaScript Essentials 2</a></h2></header><p></p><ul class="actions special"><li><a href="https://theanh412.github.io/myblog/certificate-javascript-essentials-2.html" class="button">Full Story</a></li></ul></article><article><header><time datetime="2024-12-31T19:38" class="date">tháng 12 31, 2024</time><h2><a href="https://theanh412.github.io/myblog/certificate-javascript-essential-1.html">Certificate: JavaScript Essential 1</a></h2></header><p></p><ul class="actions special"><li><a href="https://theanh412.github.io/myblog/certificate-javascript-essential-1.html" class="button">Full Story</a></li></ul></article><article><header><time datetime="2024-12-31T09:59" class="date">tháng 12 31, 2024</time><h2><a href="https://theanh412.github.io/myblog/gioi-thieu-java-8.html">Giới thiệu Java 8</a></h2></header><a href="https://theanh412.github.io/myblog/gioi-thieu-java-8.html" class="image fit"><img src="https://theanh412.github.io/myblog/media/posts/8/Anh-chup-man-hinh-2024-12-31-153302.png" srcset="https://theanh412.github.io/myblog/media/posts/8/responsive/Anh-chup-man-hinh-2024-12-31-153302-xs.png 300w, https://theanh412.github.io/myblog/media/posts/8/responsive/Anh-chup-man-hinh-2024-12-31-153302-sm.png 480w, https://theanh412.github.io/myblog/media/posts/8/responsive/Anh-chup-man-hinh-2024-12-31-153302-md.png 768w, https://theanh412.github.io/myblog/media/posts/8/responsive/Anh-chup-man-hinh-2024-12-31-153302-lg.png 1024w, https://theanh412.github.io/myblog/media/posts/8/responsive/Anh-chup-man-hinh-2024-12-31-153302-xl.png 1360w" sizes="(max-width: 1360px) 100vw, 1360px" loading="lazy" height="183" width="275" alt=""></a><p>Giới thiệu Java 8 Oracle đã phát hành một phiên bản Java 8 vào ngày 18/03/2014. Đây là một phiên bản mang tính cách mạng của Java cho nền tảng phát triển phần mềm. Nó bao gồm các nâng cấp khác nhau cho lập trình Java, JVM, Tools&hellip;</p><ul class="actions special"><li><a href="https://theanh412.github.io/myblog/gioi-thieu-java-8.html" class="button">Full Story</a></li></ul></article><article><header><time datetime="2024-12-31T09:55" class="date">tháng 12 31, 2024</time><h2><a href="https://theanh412.github.io/myblog/su-dung-console-input-va-output-trong-java.html">Sử dụng Console input và output trong Java</a></h2></header><a href="https://theanh412.github.io/myblog/su-dung-console-input-va-output-trong-java.html" class="image fit"><img src="https://theanh412.github.io/myblog/media/posts/6/in.png" srcset="https://theanh412.github.io/myblog/media/posts/6/responsive/in-xs.png 300w, https://theanh412.github.io/myblog/media/posts/6/responsive/in-sm.png 480w, https://theanh412.github.io/myblog/media/posts/6/responsive/in-md.png 768w, https://theanh412.github.io/myblog/media/posts/6/responsive/in-lg.png 1024w, https://theanh412.github.io/myblog/media/posts/6/responsive/in-xl.png 1360w" sizes="(max-width: 1360px) 100vw, 1360px" loading="lazy" height="184" width="274" alt=""></a><p>Lập trình Java với Console nhập xuất dữ liệu người dùng và trích xuất ra file chạy .jar bằng Eclipse, chạy với dùng lệnh cmd của Windows Các ứng dụng trong phần Java Cơ bản sử dụng Console (giao diện dòng text) để nhập dữ&hellip;</p><ul class="actions special"><li><a href="https://theanh412.github.io/myblog/su-dung-console-input-va-output-trong-java.html" class="button">Full Story</a></li></ul></article></div></main><footer id="copyright"><ul><li>THEANH</li></ul></footer></div><script src="https://theanh412.github.io/myblog/assets/js/jquery.min.js?v=c9771cc3e90e18f5336eedbd0fffb2cf"></script><script src="https://theanh412.github.io/myblog/assets/js/jquery.scrollex.min.js?v=f89065e3d988006af9791b44561d7c90"></script><script src="https://theanh412.github.io/myblog/assets/js/jquery.scrolly.min.js?v=1ed5a78bde1476875a40f6b9ff44fc14"></script><script src="https://theanh412.github.io/myblog/assets/js/browser.min.js?v=c07298dd19048a8a69ad97e754dfe8d0"></script><script src="https://theanh412.github.io/myblog/assets/js/breakpoints.min.js?v=81a479eb099e3b187613943b085923b8"></script><script src="https://theanh412.github.io/myblog/assets/js/util.min.js?v=4201a626f8c9b614a663b3a1d7d82615"></script><script src="https://theanh412.github.io/myblog/assets/js/main.min.js?v=56233c354bd814758be8bff42f7e13a5"></script><script>/*<![CDATA[*/var images=document.querySelectorAll("img[loading]");for(var i=0;i<images.length;i++){if(images[i].complete){images[i].classList.add("is-loaded")}else{images[i].addEventListener("load",function(){this.classList.add("is-loaded")},false)}};/*]]>*/</script></body></html>